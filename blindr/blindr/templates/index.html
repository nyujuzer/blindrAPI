<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>testAPI</title>
    <style>
        .container-col {
            display: flex;
            width: 50%;
            flex-direction: column;
            align-content: center;
            justify-content: center;
            align-self: center;
        }
    </style>

</head>

<body>
    <div class="container-col">
        <input type="text" id="name" placeholder="gipsz jakab">
        <input type="password" id="password" placeholder="jelszó"> nem
        <select id="gender">
      <option value="male">male</option>
      <option value="female">female</option>
      <option value="non-binary">non-binary</option>
    </select> orientáció
        <select id="sexuality">
      <option value="male">male</option>
      <option value="female">women</option>
      <option value="any">any</option>
    </select>
        <textarea id="hobbies" cols="30" rows="1" placeholder="hobbies"></textarea>
        <input placeholder="19" type="number" id="age">
        <input placeholder="valaki@valami.az" type="email" name="" id="email">
        <input type="submit" id="send" value="Register">
        <p id="res"></p>
        <a href="login.html">Login</a>
    </div>
</body>
<script type="text/javascript">
    const xhttp = new XMLHttpRequest();
    const res = document.getElementById('res')
    const name = document.getElementById('name')
    const password = document.getElementById('password')
    const gender = document.getElementById('gender')
    const sexuality = document.getElementById('sexuality')
    const hobbies = document.getElementById('hobbies')
    const email = document.getElementById('email')
    const age = document.getElementById('age')
    const send = document.getElementById('send')
    send.addEventListener("click", () => {
        xhttp.onreadystatechange = function() {
            if (this.readyState == 4) {
                res.innerHTML = this.responseText + "--" + this.status;
            }
        };
        xhttp.open("POST", "http://127.0.0.1:8000/register/", true);
        xhttp.setRequestHeader("Content-type", "application/json");
        xhttp.send(evaluate());
    })

    function userAction() {

    }

    function evaluate() {
        const d = {
            'account': {
                'name': name.value,
                'password': password.value,
                'email': email.value
            },
            'display': {
                'accountId': 'assignLater',
                'name': name.value,
                'gender': gender.value,
                'preferences': sexuality.value,
                'hobbies': hobbies.value,
                'age': age.value,
            }

        }

        console.log()
        return JSON.stringify(d)
    }
</script>

</html>